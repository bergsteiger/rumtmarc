: K450293671

 CONST Filter 'Автоприменяемый фильтр'

 "Создать фильтр с именем {(Filter)} и с параметром {(@ NOP )} для {(@ ППР)}"
 "Открыть фильтры"
 "Сделать фильтр {(15)} автоприменяемым"
 ОМ
 TRY
  "В БП ищем контекст {('1')}"
 FINALLY
  "Удалить фильтр без закрытия вкладки с именем {(Filter)} для {(@ NOP )}"
  "Дождаться переключения вкладок"
  "Получить имя текущего элемента дерева {(контрол::FiltersList)}"
  // Смотрим, что фильтр не удалился, т.к. он используется 
  'Стоит ли галочка у фильтра? ' . "Проверить, выбран ли фильтр {(15)}"
  ( 15 "Узнать индекс иконки в дереве {(контрол::FiltersList:push)}" РАВНО 5 ) IF
  'У фильтра есть красный крестик (фильтр удален).' .
  ELSE
  'У фильтра НЕТ красного крестика (фильтр почему-то не удален)!' .
  ENDIF
  "Сравнить с эталоном имя последнего фильтра на вкладке Фильтры" 
  // Смотрим, что фильтр удалился 
 END
;

K450293671